{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\niziToast.settings({\n  timeout: 2000,\n  theme: 'dark',\n  displayMode: 'once',\n  position: 'topRight',\n  resetOnHover: true,\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n});\n\nconst timer = {\n  intervalID: null,\n  userDate: null,\n  elements: {\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]'),\n    button: document.querySelector('[data-start]'),\n    input: document.querySelector('#datetime-picker'),\n  },\n  isFutureDate() {\n    if (this.userDate - Date.now() > 0) return true;\n    this.showMessage('Please choose a date in the future!');\n    this.disableInterface(false);\n    return false;\n  },\n  setTimer() {\n    if (!this.isFutureDate()) return;\n    this.startCountDown();\n    this.disableInterface();\n  },\n  startCountDown() {\n    this.intervalID = setInterval(() => {\n      const left = this.userDate - Date.now();\n\n      if (left <= 0) {\n        this.stopTimer();\n        return;\n      }\n\n      const time = this.convertMs(left);\n\n      this.elements.days.textContent = this.pad(time.days);\n      this.elements.hours.textContent = this.pad(time.hours);\n      this.elements.minutes.textContent = this.pad(time.minutes);\n      this.elements.seconds.textContent = this.pad(time.seconds);\n    }, 1000);\n  },\n  stopTimer() {\n    clearInterval(this.intervalID);\n    this.enableInterface();\n  },\n  convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n  },\n  pad(value) {\n    return String(value).padStart(2, '0');\n  },\n  disableInterface(all = true) {\n    if (all) this.elements.input.setAttribute('disabled', '');\n    this.elements.button.setAttribute('disabled', '');\n  },\n  enableInterface(all = false) {\n    if (all) this.elements.button.removeAttribute('disabled');\n    this.elements.input.removeAttribute('disabled');\n  },\n  showMessage(message) {\n    iziToast.show({ message: [message] });\n  },\n};\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    timer.userDate = selectedDates[0];\n    if (timer.isFutureDate()) timer.enableInterface(true);\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\ntimer.elements.button.addEventListener('click', timer.setTimer.bind(timer));\n"],"names":["iziToast","timer","left","time","ms","days","hours","minutes","seconds","value","all","message","options","selectedDates","flatpickr"],"mappings":"+IAGAA,EAAS,SAAS,CAChB,QAAS,IACT,MAAO,OACP,YAAa,OACb,SAAU,WACV,aAAc,GACd,aAAc,UACd,cAAe,UACjB,CAAC,EAED,MAAMC,EAAQ,CACZ,WAAY,KACZ,SAAU,KACV,SAAU,CACR,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,EAChD,OAAQ,SAAS,cAAc,cAAc,EAC7C,MAAO,SAAS,cAAc,kBAAkB,CACjD,EACD,cAAe,CACb,OAAI,KAAK,SAAW,KAAK,IAAG,EAAK,EAAU,IAC3C,KAAK,YAAY,qCAAqC,EACtD,KAAK,iBAAiB,EAAK,EACpB,GACR,EACD,UAAW,CACJ,KAAK,aAAY,IACtB,KAAK,eAAc,EACnB,KAAK,iBAAgB,EACtB,EACD,gBAAiB,CACf,KAAK,WAAa,YAAY,IAAM,CAClC,MAAMC,EAAO,KAAK,SAAW,KAAK,IAAG,EAErC,GAAIA,GAAQ,EAAG,CACb,KAAK,UAAS,EACd,MACD,CAED,MAAMC,EAAO,KAAK,UAAUD,CAAI,EAEhC,KAAK,SAAS,KAAK,YAAc,KAAK,IAAIC,EAAK,IAAI,EACnD,KAAK,SAAS,MAAM,YAAc,KAAK,IAAIA,EAAK,KAAK,EACrD,KAAK,SAAS,QAAQ,YAAc,KAAK,IAAIA,EAAK,OAAO,EACzD,KAAK,SAAS,QAAQ,YAAc,KAAK,IAAIA,EAAK,OAAO,CAC1D,EAAE,GAAI,CACR,EACD,WAAY,CACV,cAAc,KAAK,UAAU,EAC7B,KAAK,gBAAe,CACrB,EACD,UAAUC,EAAI,CAMZ,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,EACD,IAAIC,EAAO,CACT,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,EACD,iBAAiBC,EAAM,GAAM,CACvBA,GAAK,KAAK,SAAS,MAAM,aAAa,WAAY,EAAE,EACxD,KAAK,SAAS,OAAO,aAAa,WAAY,EAAE,CACjD,EACD,gBAAgBA,EAAM,GAAO,CACvBA,GAAK,KAAK,SAAS,OAAO,gBAAgB,UAAU,EACxD,KAAK,SAAS,MAAM,gBAAgB,UAAU,CAC/C,EACD,YAAYC,EAAS,CACnBX,EAAS,KAAK,CAAE,QAAS,CAACW,CAAO,CAAG,CAAA,CACrC,CACH,EAEMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBZ,EAAM,SAAWY,EAAc,CAAC,EAC5BZ,EAAM,aAAc,GAAEA,EAAM,gBAAgB,EAAI,CACrD,CACH,EAEAa,EAAU,mBAAoBF,CAAO,EAErCX,EAAM,SAAS,OAAO,iBAAiB,QAASA,EAAM,SAAS,KAAKA,CAAK,CAAC"}